<!DOCTYPE html>
<html lang="en" data-netlify="true">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bungi x Bobby | The Tech Animal Collection</title>
    
    <!-- Ultra Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.shopify.com">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üê∞</text></svg>">
    
    <!-- Ultra-Critical CSS - Minimal for instant render -->
    <style>
        /* Ultra-minimal critical styles for instant FCP */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:system-ui,-apple-system,sans-serif;background:#0a0a0a;color:#fff;overflow-x:hidden}
        .loading{position:fixed;top:0;left:0;width:100%;height:100%;background:#0a0a0a;z-index:9999;display:flex;align-items:center;justify-content:center;transition:opacity .3s}
        .loading-text{color:#00ff88;font-size:1.5rem;animation:pulse 1s infinite}
        @keyframes pulse{0%,100%{opacity:.5}50%{opacity:1}}
        .hidden{display:none!important}
        .navbar{position:fixed;top:0;width:100%;background:rgba(10,10,10,.95);z-index:1000;padding:1rem 0}
        .nav-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;padding:0 2rem}
        .nav-brand{font-size:1.5rem;font-weight:700;color:#00ff88;text-decoration:none}
        .nav-menu{display:flex;list-style:none;gap:2rem}
        .nav-link{color:#fff;text-decoration:none;font-weight:500}
        .nav-link:hover{color:#00ff88}
        .cart-btn{background:#00ff88;border:none;padding:.5rem 1rem;border-radius:5px;color:#000;font-weight:600;cursor:pointer}
        .hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:80px 2rem 2rem}
        .hero-title{font-size:clamp(2.5rem,8vw,4rem);margin-bottom:1rem;color:#00ff88;font-weight:900}
        .subtitle{display:block;font-size:clamp(1rem,3vw,1.5rem);color:#fff;margin-top:.5rem}
        .cta-btn{background:#00ff88;border:none;padding:1rem 2rem;font-size:1.2rem;font-weight:600;color:#000;border-radius:5px;cursor:pointer;margin-top:2rem}
        .section{padding:4rem 2rem}
        .container{max-width:1200px;margin:0 auto}
        .section-title{font-size:2.5rem;text-align:center;margin-bottom:3rem;color:#00ff88;font-weight:700}
        @media(max-width:768px){.nav-menu{display:none}.nav-container{padding:0 1rem}.hero{padding:100px 1rem 2rem}}
    </style>
</head>
<body>
    <!-- Ultra-minimal loading screen -->
    <div id="loading" class="loading">
        <div class="loading-text">BOBBY</div>
    </div>

    <!-- Main content - minimal structure for fast LCP -->
    <div id="main" class="hidden">
        <!-- Minimal navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <a href="#" class="nav-brand">BUNGI X BOBBY</a>
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link">HOME</a></li>
                    <li><a href="products.html" class="nav-link">SHOP</a></li>
                </ul>
                <button class="cart-btn" id="cart-btn">üõí <span id="cart-count">0</span></button>
            </div>
        </nav>

        <!-- Hero - optimized for LCP -->
        <section class="hero">
            <div>
                <h1 class="hero-title">
                    BUNGI X BOBBY
                    <span class="subtitle">THE TECH ANIMAL COLLECTION</span>
                </h1>
                <button class="cta-btn" onclick="location.href='products.html'">
                    EXPLORE COLLECTION
                </button>
            </div>
        </section>

        <!-- Minimal sections -->
        <section class="section">
            <div class="container">
                <h2 class="section-title">COLLECTION</h2>
                <div id="products">Loading products...</div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 class="section-title">ABOUT BOBBY</h2>
                <p style="text-align:center;max-width:800px;margin:0 auto;line-height:1.6">
                    Tech animal of the elite GooberMcGeet club. Bobby the Rabbit reigns supreme in the digital underground.
                </p>
            </div>
        </section>
    </div>

    <!-- Ultra-optimized JavaScript - minimal blocking -->
    <script>
        // Performance marks
        performance.mark('script-start');
        
        // Ultra-fast site initialization
        const loading = document.getElementById('loading');
        const main = document.getElementById('main');
        
        // Show main content immediately after DOM parse
        function showSite() {
            loading.style.opacity = '0';
            setTimeout(() => {
                loading.style.display = 'none';
                main.classList.remove('hidden');
                performance.mark('site-visible');
            }, 300);
        }
        
        // Minimal cart functionality
        const cart = {
            items: JSON.parse(localStorage.getItem('bobby-cart') || '[]'),
            updateCount() {
                document.getElementById('cart-count').textContent = 
                    this.items.reduce((sum, item) => sum + (item.quantity || 0), 0);
            },
            open() {
                alert('Cart functionality loading...');
                // Load full cart system on demand
                if (!window.fullCartLoaded) {
                    const script = document.createElement('script');
                    script.src = 'scripts/performance-bundle.js';
                    script.onload = () => {
                        window.fullCartLoaded = true;
                        if (window.BobbyCart) window.BobbyCart.openCart();
                    };
                    document.head.appendChild(script);
                }
            }
        };
        
        // Initialize immediately
        cart.updateCount();
        document.getElementById('cart-btn').onclick = () => cart.open();
        
        // Show site as fast as possible
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => setTimeout(showSite, 100));
        } else {
            setTimeout(showSite, 100);
        }
        
        // Load everything else after site is visible
        setTimeout(() => {
            // Load fonts asynchronously
            const fontLink = document.createElement('link');
            fontLink.href = 'https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap';
            fontLink.rel = 'stylesheet';
            document.head.appendChild(fontLink);
            
            // Load enhanced styles
            const styleLink = document.createElement('link');
            styleLink.href = 'styles/main.css';
            styleLink.rel = 'stylesheet';
            styleLink.media = 'print';
            styleLink.onload = function() { this.media = 'all'; };
            document.head.appendChild(styleLink);
            
            // Load products
            fetch('/netlify/functions/get-products-admin-api')
                .then(r => r.json())
                .then(data => {
                    const products = data.products || [];
                    document.getElementById('products').innerHTML = products.slice(0, 4).map(p => 
                        `<div style="display:inline-block;margin:1rem;padding:1rem;background:rgba(26,26,46,0.5);border-radius:10px;text-align:center">
                            <h3>${p.title}</h3>
                            <p style="color:#00ff88">$${p.variants?.[0]?.price || 'N/A'}</p>
                        </div>`
                    ).join('') || '<p>Products coming soon...</p>';
                })
                .catch(() => {
                    document.getElementById('products').innerHTML = '<p>Products coming soon...</p>';
                });
            
            performance.mark('enhancements-loaded');
        }, 500);
        
        // Performance logging
        window.addEventListener('load', () => {
            setTimeout(() => {
                const nav = performance.getEntriesByType('navigation')[0];
                console.log('Performance:', {
                    'DOM Ready': Math.round(nav.domContentLoadedEventEnd - nav.fetchStart),
                    'Load Complete': Math.round(nav.loadEventEnd - nav.fetchStart),
                    'FCP': Math.round(nav.domContentLoadedEventEnd - nav.domContentLoadedEventStart)
                });
            }, 100);
        });
    </script>
</body>
</html>