/* MOBILE COLLECTION BLUR FIX - COMPREHENSIVE SOLUTION */
/* This file specifically addresses the mobile blur issue on product images */
/* Priority: Load this CSS file last to ensure all overrides take effect */

/* ========================================
   MOBILE PRODUCT IMAGE BLUR FIX
   ======================================== */

@media (max-width: 768px) {
    /* CRITICAL: Remove ALL backdrop-filter effects from product elements */
    .product-card,
    .product-card *,
    .product-grid .product-card,
    .product-grid-scroll .product-card,
    .products-grid .product-card,
    .collection .product-card,
    .product-image,
    .product-image *,
    .product-image img,
    .product-overlay,
    .product-info,
    .product-name,
    .product-price,
    .product-action-btn,
    .quick-view-btn,
    .add-to-cart-btn {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
    
    /* CRITICAL: Ensure crystal clear product images - MATCH DESKTOP STYLING */
    .product-image img,
    .product-img,
    .grid-image,
    .hoodie-front,
    .hoodie-back,
    .tee-default,
    .tee-hover {
        /* Remove only backdrop-filter (blur), keep other filters for proper appearance */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Keep desktop styling but remove blur-related filters only */
        image-rendering: auto !important;
        -webkit-backface-visibility: visible !important;
        backface-visibility: visible !important;
        /* Remove performance-heavy transforms that cause choppy scrolling */
        transform: none !important;
        will-change: auto !important;
        /* Ensure proper opacity */
        opacity: 1 !important;
    }
    
    /* SPECIFIC FIX: Apply desktop-like styling to grid images on mobile */
    .grid-item .grid-image {
        /* Remove backdrop-filter but keep desktop brightness/contrast */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Apply desktop-like styling: brightness(0.9) contrast(1.1) from main.css */
        filter: brightness(0.9) contrast(1.1) !important;
        -webkit-filter: brightness(0.9) contrast(1.1) !important;
    }
    
    .grid-item:nth-child(odd) .grid-image {
        /* Remove backdrop-filter but keep desktop color styling */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Apply desktop styling: brightness(0.85) sepia(0.2) saturate(1.2) hue-rotate(250deg) */
        filter: brightness(0.85) sepia(0.2) saturate(1.2) hue-rotate(250deg) !important;
        -webkit-filter: brightness(0.85) sepia(0.2) saturate(1.2) hue-rotate(250deg) !important;
    }
    
    .grid-item:nth-child(even) .grid-image {
        /* Remove backdrop-filter but keep desktop color styling */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Apply desktop styling: brightness(0.85) sepia(0.15) saturate(1.2) hue-rotate(40deg) */
        filter: brightness(0.85) sepia(0.15) saturate(1.2) hue-rotate(40deg) !important;
        -webkit-filter: brightness(0.85) sepia(0.15) saturate(1.2) hue-rotate(40deg) !important;
    }
    
    /* SPECIFIC FIX: Product card images should be clear and bright like desktop */
    .product-card .product-image img,
    .product-grid .product-card .product-image img,
    .product-grid-scroll .product-card .product-image img,
    .products-grid .product-card .product-image img {
        /* Remove only backdrop-filter, keep normal appearance */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Ensure bright, clear appearance like desktop */
        opacity: 1 !important;
    }
    
    /* CRITICAL FIX: Homepage product cards - remove blur and fix darkness */
    .product-grid-scroll .product-card {
        /* Remove backdrop-filter that causes blur */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Make background like desktop - solid instead of transparent */
        background: rgba(26, 26, 46, 0.95) !important;
    }
    
    /* CRITICAL FIX: Homepage product images - make them bright and clear */
    .product-grid-scroll .product-image,
    .product-grid-scroll .product-image img {
        /* Remove all blur effects */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        filter: none !important;
        -webkit-filter: none !important;
        /* Ensure bright appearance */
        opacity: 1 !important;
    }
    
    /* CRITICAL FIX: Make product image backgrounds white like desktop */
    .product-grid-scroll .product-image,
    .product-card .product-image,
    .product-grid .product-card .product-image,
    .products-grid .product-card .product-image {
        /* White background like desktop */
        background: #ffffff !important;
    }
    
    /* CRITICAL FIX: Ensure product images have white background and proper padding like desktop */
    .product-grid-scroll .product-image img,
    .product-card .product-image img,
    .product-grid .product-card .product-image img,
    .products-grid .product-card .product-image img {
        /* White background like desktop */
        background: #ffffff !important;
        /* Proper padding like desktop */
        padding: 20px !important;
        /* Ensure proper object-fit */
        object-fit: scale-down !important;
        /* Remove any dark filters */
        filter: none !important;
        -webkit-filter: none !important;
        /* Ensure full brightness */
        opacity: 1 !important;
        brightness: 1 !important;
    }
    
    /* CRITICAL: Remove blur from collection section backgrounds */
    .collection,
    .collection::before,
    .collection::after,
    .product-collection,
    .product-collection::before,
    .product-collection::after {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        filter: none !important;
        -webkit-filter: none !important;
    }
    
    /* CRITICAL: Override any inherited blur effects */
    .collection * {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
    
    /* Maintain necessary blur only for navigation and modals */
    .navbar {
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
    }
    
    .cart-modal,
    .cart-content {
        backdrop-filter: blur(5px) !important;
        -webkit-backdrop-filter: blur(5px) !important;
    }
}

/* ========================================
   SMALL MOBILE DEVICES (< 480px)
   ======================================== */

@media (max-width: 480px) {
    /* NUCLEAR OPTION: Remove ALL backdrop-filter effects */
    * {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
    
    /* Selectively restore blur only where absolutely necessary */
    .navbar {
        backdrop-filter: blur(8px) !important;
        -webkit-backdrop-filter: blur(8px) !important;
    }
    
    .cart-modal .cart-content {
        backdrop-filter: blur(3px) !important;
        -webkit-backdrop-filter: blur(3px) !important;
    }
    
    /* Ensure all product elements are completely clear - REFINED */
    .product-card,
    .product-card *,
    .product-image,
    .product-image *,
    .product-image img,
    .collection,
    .collection * {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Don't remove all filters - preserve brightness/contrast */
    }
}

/* ========================================
   EXTRA SMALL DEVICES (< 360px)
   ======================================== */

@media (max-width: 360px) {
    /* Maximum compatibility mode - no blur effects at all */
    *,
    *::before,
    *::after {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        /* Don't remove all filters - preserve image quality */
    }
    
    /* Only restore essential navigation blur */
    .navbar {
        backdrop-filter: blur(5px) !important;
        -webkit-backdrop-filter: blur(5px) !important;
    }
}

/* ========================================
   WEBKIT SPECIFIC FIXES
   ======================================== */

@media (max-width: 768px) {
    /* Target WebKit browsers specifically */
    @supports (-webkit-backdrop-filter: blur(1px)) {
        .product-card,
        .product-image,
        .product-image img,
        .collection {
            -webkit-backdrop-filter: none !important;
        }
    }
    
    /* Target modern browsers with backdrop-filter support */
    @supports (backdrop-filter: blur(1px)) {
        .product-card,
        .product-image,
        .product-image img,
        .collection {
            backdrop-filter: none !important;
        }
    }
}

/* ========================================
   SMOOTH SCROLLING OPTIMIZATIONS
   ======================================== */

@media (max-width: 768px) {
    /* Optimize for smooth scrolling - remove heavy transforms */
    .product-image img {
        /* Remove transforms that cause choppy scrolling */
        transform: none !important;
        -webkit-transform: none !important;
        will-change: auto !important;
        /* Remove contain property that can cause performance issues */
    }
    
    /* Ensure smooth product card rendering */
    .product-card {
        will-change: auto !important;
        /* Remove contain property for better scrolling performance */
    }
    
    /* Improve overall scrolling performance */
    .product-grid-scroll,
    .products-grid {
        -webkit-overflow-scrolling: touch !important;
        scroll-behavior: smooth !important;
    }
}

/* ========================================
   FALLBACK FOR OLDER MOBILE BROWSERS
   ======================================== */

@media (max-width: 768px) {
    /* Fallback for browsers that don't support backdrop-filter */
    .product-card {
        background: rgba(26, 26, 46, 0.95) !important;
    }
    
    .product-overlay {
        background: rgba(0, 0, 0, 0.7) !important;
    }
    
    .collection-controls {
        background: rgba(26, 26, 46, 0.98) !important;
    }
}

/* ========================================
   DEBUG MODE (uncomment to test)
   ======================================== */

/*
@media (max-width: 768px) {
    .product-card {
        border: 2px solid red !important;
    }
    
    .product-image {
        border: 2px solid blue !important;
    }
    
    .product-image img {
        border: 2px solid green !important;
    }
}
*/